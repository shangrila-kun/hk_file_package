## 汇编基础

- 存储单元：微型机存储器的存储单元可以存储一个Byte,即8个二进制位。
- 汇编指令：机器码的助记符、有对应的机器码。需要汇编编译器编译成对应的机器码。
- 地址总线：CPU是通过地址总线来指定存储器单元的。地址总线上能传送多少个不同的信息，CPU就可以对多少个存储单元进行寻址。
- 数据总线：CPU与内存或者其他器件之间的数据传送是通过数据总线来进行的。数据总线的宽度决定了CPU和外界的数据传送速度。8根数据总线一次可以传送一个8位二进制数据（一个字节），16根数据总线一次可以传送两个字节。
- 控制总线：CPU对外部器件的控制是通过控制总线来进行的。有多少根控制总线，就意味着CPU提供了对外部器件的多少种控制。

### CPU对存储器的读写

​	在了解了[计算机中的存储器](http://blog.hiccup.xyz/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8%E5%99%A8%E4%BB%AC/)之后，紧接着我们会有一些问题：CPU是怎样去访问内存地址空间的某一个地址的呢？接下来会以8086cpu架构作为例子来进行介绍（8086是老古董了，现代的CPU有i5架构的，还有i7架构的），之所以选择8086是因为它结构比较简单，适合上手，通过它学习到的概念，同样可以对其他CPU进行举一反三。![img](https://segmentfault.com/img/remote/1460000006773246)

​	**CPU要读写存储器，总得需要有导线把它们连在一起吧？在计算机中，这种导线称为总线**，如果你拆过机箱就很清楚，它就是一根根的导线的集合，这些导线同时发送信号，每根导线要么高电平，要么低电平。**总线按照功能的不同又分为地址总线，数据总线和控制总线。**以上图为例，CPU要读取内存地址空间中地址为3的信息，大概分成以下步骤：  

- CPU向地址线输出物理地址3
- 控制线需要选择相应的存储设备，然后通知该设备，将要从中读取数据
- 该存储设备会将数据8送入数据线

CPU写信息到存储器的过程类似。

我们把上面的图放大，还可以再深入一点：

![img](https://segmentfault.com/img/remote/1460000005121949)我们刚才说CPU和存储设备之间有总线相连，其实CPU内部也是有总线的，它连接着CPU中不同的部件，比如寄存器，运算器，控制器。但是计算机中，不同总线的位数不一定是一样的，比如8086CPU内部总线就是16位的，地址总线是20位的，数据总线是16位的。

那么问题来了？既然8086CPU是16位结构的，怎样才能做到输出20位的物理地址呢？其实很简单，地址加法器是这样解决的：段地址（16位）x 16 + 偏移地址（16位）＝ 物理地址（20位），比如B800H x 16 + 1111H=B9000H。如果对16进制不太熟悉，那我们可以用熟悉的10进制来描述这个计算，比如家，学校，图书馆在一条直线上，他们之间的距离如图所示，我们可以这样跟朋友描述图书馆的距离：图书馆离家200m，这其实就是它的物理地址了。但现在有一些限制，我们和朋友之间只能通过纸条来通信，不巧的是，纸条上只能写2位数，且纸条数量不限，于是我们约定规则：纸条1x10+纸条2＝物理地址，比如在纸条1上写11，纸条2上写90，意思是说学校离家110m，图书馆离学校90m，这就ok了。而这2张纸条能表示的最远距离为99x10+99=1089。

现在看来，这里出现的段地址:偏移地址的概念，完全是因为8086CPU的硬件设计是这样的。我们设想一下，如果8086CPU的内部总线是20位的，不就可以直接表示物理地址了吗？！所以段地址:偏移地址的概念并不是关键，也许以后CPU硬件设计变了，采用完全不同的计算方式都说不定。

我们现在知道CPU是如何从内存读取信息的了，但是CPU怎么知道读过来的信息到底是普通的数据还是需要被执行的程序呢？很简单，我们知道CPU中有很多的寄存器（就是用来存放信息的），它指定了2个寄存器（分别叫CS, IP，CS用来存段地址，IP用来存偏移地址），让它们来表示当前需要被执行的机器码的物理地址，在执行代码的过程中，CPU会去维护CS和IP的值，比如每执行一句机器码，IP会增加相应的数值以指向下一句指令。以此类推，我们可以用其他的寄存器去表示数据的物理地址。所以说，内存中的二进制信息本来对CPU没有区别，全靠约定好的寄存器里面存放的地址，才得以区分程序和数据。

### 各类存储器芯片

- 接口卡

  > 在计算机系统中，所有可用程序控制其工作的设备，必须受到**CPU的控制**。CPU对**外部设备**都不能直接控制，如显示器、音响、打印机等，直接控制这些设备进行工作的是插在扩展插槽上的接口卡。
  >
  > 接口卡的定义：
  >
  > 接口卡一般可以叫做HBA，叫做主机总线适配器，是带有协议功能的主控制器，CPU发送命令给HBA，HBA解析之后作为主控制端，发送命令给device。比如说你要访问硬盘，这需要device和主机都支持sata协议。主板上肯定有一个HBA，它负责实现主机端的sata协议，硬盘自身实现设备端的sata协议。只有两者都支持sata协议，才可以交流。USB协议也是一样，需要主机和device都支持，而且各实现一部分。

- 存储器

  > 从读写属性上看又分为两类：**随机存储器（RAM）**和**只读存储器（ROM）**。
  >
  >  （1）随机存储器
  >
  > 用于存放供CPU使用的**绝大部分程序和数据**，主随机存储器一般由两个位置上的RAM组成，装在主板上RAM和插在扩展插槽上的RAM。
  >
  >  
  >
  > ​    （2）装有BIOS（**基本输入/输出系统**）的ROM
  >
  > BIOS是由主板和各类接口卡（如显卡、网卡等）厂商提供的**软件系统**，可以通过它利用该硬件设备进行最基本的输入输出。在主板和某些接口卡上插有存储相应BIOS的ROM。
  >
  >  
  >
  >  例如，主板上的ROM中存储着主板的BIOS（通常称为**系统BIOS**）；显卡上的ROM中存储着显卡的BIOS；如果网卡上装有ROM，那其中就可以存储网卡的BIOS。
  >
  >  
  >
  > ​    （3）接口卡上的RAM
  >
  >  某些接口卡需要对大批量输入、输出数据进行暂时存储，在其上装有RAM。最典型的是显示卡上的RAM。一般称为**显存**。显示卡随时将显存中的数据向显示器上输出。换句话来说，我们将需要显示的内容写入显存，就会出现在显示器上。
  >
  > 下图展示了PC系统中各类存储器的逻辑连接情况：
  >
  > ![img](https://img-blog.csdn.net/20170404192028594)

  ### 内存地址空间

  - [内存地址空间](https://blog.csdn.net/u014338577/article/details/71438707)



